<% content_for(:title, @record.page_title) %>

<div id="ndl-request-form">
  <h1>Select Volume/Issue</h1>
  <p>This work has multiple volumes/issues.  Please select the volume issue want to receive. </p>

  <p>
    <%= select_tag(:volume, @record.volume_option_tags, prompt: "Select Volume", id: "ndl-request-form-volume") %>
  </p>

  <% @record.volumes.each do |volume| %>
    <div id="ndl-request-volume-<%= volume.id%>" class="ndl-request-volume">
      <%
      item_options = options_from_collection_for_select(volume.items, 'id', 'institution_code')
      %>
      <%= select_tag(:item, item_options, prompt: "Select Institution for #{volume.title}", class: "ndl-request-form-item") %>
      <% volume.items.each do |item| %>
        <div id="ndl-request-item-<%= item.id %>" class="ndl-request-item">
          <%
          pickup_options = options_from_collection_for_select(item.pickup_locations, 'id', 'title')
          %>
          <%= select_tag(:pickup_location, pickup_options, prompt: "Select Pickup Location for #{item.title} #{item.id}") %>
        </div>
      <% end %>
    </div>
  <% end %>

</div>
